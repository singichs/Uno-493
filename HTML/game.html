<html>
	<head>
		<title>Uno!</title>
		<link rel="stylesheet" href="../css/game.css">
		<link rel="stylesheet" href="../css/card.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

		<!-- Javascript Links -->
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/main.js"></script>

	</head>
	<body background="https://phandroid.s3.amazonaws.com/wp-content/uploads/2014/12/Ultimate-Material-Lollipop-Collection-407.png">
		<nav class="navbar navbar-default navbar-fixed-top" id="nav">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand">Uno!</a>
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>


				<div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li>
							<a href="index.html">
								<span class="glyphicon glyphicon-home"></span> Home
							</a>
						</li>
						<li>
							<a href="stats.html">Leaderboard</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="gameboard">
			<div class="player1">
				<label type="text" class="player1-control">Jim</label></br>
				<label type="text" class="player1-name">Cards Remaining: 
					<label id="p1cards"></label>
				</label>
				<ul id="player1-cards" class="player1-cards">
					<!--<li class="card num-0 blue">
						<span class="inner">
							<span class="mark">0</span>
						</span>
					</li>-->
					<img class= "CPUhand" src = "../img/facedown.png">
				</ul> 
			</div>
			<div class="player2">
				<label type="text" class="player2-control">Bob</label></br>
				<label type="text" class="player2-name">Cards Remaining: 
					<label id="p2cards"></label>
				</label>
				<ul id="player2-cards" class="player2-cards">
					<img class= "CPUhand" src = "../img/facedown.png">
				</ul>
			</div>
			<div class="player3">
				<label type="text" class="player3-control">Cooter</label></br>
				<label type="text" class="player3-name">Cards Remaining: 
					<label id="p3cards"></label>
				</label>
				<ul id="player3-cards" class="player3-cards">
					<img class= "CPUhand" src = "../img/facedown.png">
					<!-- <li class="card num-0 red">
						<span class="inner">
							<span class="mark">0</span>
						</span>
					</li>
					<li class="card num-1 red">
						<span class="inner">
							<span class="mark">1</span>
						</span>
					</li> -->
				</ul>
			</div>
			<div class="player4">
				<label type="text" class="player4-control" id="currentUsr"></label></br>
				<label type="text" class="player4-name">Cards Remaining: 
					<label id="p4cards"></label>
				</label>
				<ul id="player4-cards" class="player4-cards">
					<!-- <li class="card num-2 green" draggable="true" ondragstart="drag(event)"> -->
					<!-- <li class="card num-2 green" id="draggable" style="z-index: 100">
						<span class="inner">
							<span class="mark" id="testing">2</span>
						</span>
					</li>
					<li class="card num-3 green">
						<span class="inner">
							<span class="mark">3</span>
						</span>
					</li>
					<li class="card num-4 green">
						<span class="inner">
							<span class="mark">4</span>
						</span>
					</li> -->
					<!-- <li class="card num-5 green">
						<span class="inner">
							<span class="mark">5</span>
						</span>
					</li> -->
				</ul>
			</div>
			<div class="center">
				<!-- <ul class="played-cards" ondrop="drop(event)" ondragover="allowDrop(event)"> -->

				<ul class="played-cards" id="droppable">
					<li class="card num-9 blue" id="centerCard" style="z-index: 1">
						<!-- <span class="inner">
							<span class="mark">9</span>
						</span> -->
					</li>
				</ul>
				<div class="deck-cards">
					<img class="CPUhand" src="../img/facedown.png" style="z-index: 1; height:170px; width:125px;" onclick="draw_card(3,1);play_game()">
				</div>
				<label class="turn">Your Turn</label>
			</div>
		</div>
	</body>
</html>

<script type="text/javascript">
	window.onload = function () {
    var url = document.location.href,
        params = url.split('?')[1].split('&'),
        data = {}, tmp;
    for (var i = 0, l = params.length; i < l; i++) {
         tmp = params[i].split('=');
         data[tmp[0]] = tmp[1];
    }
    document.getElementById('currentUsr').innerHTML = data.name;

	 //    var jimCards = document.getElementById("player1-cards").getElementsByTagName('li').length;
	 //    var bobCards = document.getElementById("player2-cards").getElementsByTagName('li').length;
	 //    var cooterCards = document.getElementById("player3-cards").getElementsByTagName('li').length;
	 //    var usrCards = document.getElementById("player4-cards").getElementsByTagName('li').length;
    
 

	// document.getElementById("p1cards").innerHTML += jimCards;
	// document.getElementById("p2cards").innerHTML += bobCards;
	// document.getElementById("p3cards").innerHTML += cooterCards;
	// document.getElementById("p4cards").innerHTML += usrCards;
	

	$(function() {
		$(".draggable").draggable();
		$("#droppable").droppable({
			drop: function (event, ui) {
				// console.log("dropping the card");
				// console.log("event target: ")
				// console.log(event.target);
				// console.log("ui helper: ")
				// console.log(ui.helper[0]);
				// console.log(ui.helper[0].id);
				// $(this).remove();
				var cardindex = ui.helper[0].id;
				if (!game_over) {
					//get_next_player();
					player_turn(cardindex);
					play_game();
				}
				$(ui.helper[0]).remove();
				// pass in event.target into the play function that click currently has
				// $(this)
				// 	.find("li")
				// 		.html();
				// // var cardindex = ui.helper[0].id;

				// // definitely should break this up into a function(s)

				// var cardcolor = list_of_cards[cardindex].color;
				// var cardnumber = list_of_cards[cardindex].number;

				// var userhand = document.getElementById("droppable");
				// userhand.innerHTML = '';
				// var card = document.createElement("li");

				// if (cardnumber == "none") //special cards
				// {
				// 	card.className = "card " + "draggable";
				// 	card.id = cardindex;
				// 	var cardimage = document.createElement("img");
				// 	cardimage.setAttribute('height', '140px');
				// 	cardimage.setAttribute('width', '105px');

				// 	var specialtype = list_of_cards[cardindex].special;

				// 	if (specialtype == "wild-draw-4")
				// 	{
				// 		cardimage.setAttribute('src', '../img/wild-draw-4.png');
				// 	}
				// 	else if (specialtype == "wild")
				// 	{

				// 		cardimage.setAttribute('src', '../img/wild.png');
			
				// 	}
				// 	else
				// 	{
				// 		console.log(cardcolor + " " + specialtype);

				// 		cardimage.setAttribute('src', '../img/' + cardcolor + specialtype + '.png');
				// 	}
				// 	card.appendChild(cardimage);
				// 	userhand.appendChild(card);

				// }
				// else
				// {

				// 	// console.log(cardcolor + " " + cardnumber);

				// 	card.className = "card num-" + cardnumber + " " + cardcolor + " draggable";
				// 	card.id = cardindex;
				// 	var innerspan = document.createElement("span");
				// 	innerspan.className = "inner";
				// 	var markspan = document.createElement("span");
				// 	markspan.className = "mark";
				// 	markspan.innerHTML = cardnumber;
				// 	innerspan.appendChild(markspan);
				// 	card.appendChild(innerspan);
				// 	userhand.appendChild(card);
				// }
			}
		});
	});
}
</script>

